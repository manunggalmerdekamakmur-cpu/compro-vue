<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>PT. Manunggal Merdeka Makmur</title>
  <meta name="version" content="1.0.8" />

  <script>
  (function () {
    const version = document.querySelector('meta[name="version"]')?.content;
    const stored = localStorage.getItem('app_version');

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations()
        .then(regs => regs.forEach(r => r.unregister()));
    }

    if (stored !== version) {
      localStorage.setItem('app_version', version);
      if ('caches' in window) {
        caches.keys().then(keys => keys.forEach(k => caches.delete(k)));
      }
      const url = new URL(location.href);
      url.searchParams.set('_v', version);
      location.replace(url);
    }
  })();
  </script>
</head>

<body class="loading">
  <div id="app"></div>
  <div id="app-loading">
    <div class="css-spinner"></div>
    <div class="loading-text">Memuat aplikasi...</div>
  </div>
  <script type="module" src="/src/main.js"></script>
</body>
</html>